# CAN Telemetry Edge Agent Configuration

# Vehicle identifier (VIN or custom ID)
vehicle_id: "VIN_TEST01"

# S3 upload configuration
s3:
  bucket: "telemetry-data-lake"
  region: "us-east-1"
  prefix: "raw"

# CAN interface configuration
can:
  interface: "socketcan"  # socketcan, pcan, virtual, or simulation
  channel: "can0"         # Interface name (e.g., can0, PCAN_USBBUS1)
  bitrate: 500000         # CAN bus bitrate (250000, 500000, 1000000)

# DBC file for simulation mode
dbc:
  path: "../sample-data/dbc/ev_powertrain.dbc"

# Batching configuration
batch:
  interval_sec: 60        # Time window for batching frames (seconds)
  max_frames: 100000      # Max frames per batch (safety limit)

# Local storage configuration
storage:
  data_dir: "./data"      # Base directory for local files
  archive_dir: "./data/archive"  # Successfully uploaded files
  pending_dir: "./data/pending"  # Files waiting for upload
  max_disk_gb: 10.0       # Max disk usage before eviction

# Upload retry configuration
upload:
  max_retries: 5          # Max retry attempts per file
  initial_backoff_sec: 2  # Initial retry delay (doubles each retry)
  max_backoff_sec: 300    # Max retry delay

# Offline buffer configuration
offline:
  check_interval_sec: 30  # How often to retry pending uploads
  max_queue_size: 100     # Max pending files before eviction

# Logging configuration
logging:
  level: "INFO"           # DEBUG, INFO, WARNING, ERROR, CRITICAL
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "./logs/agent.log"
